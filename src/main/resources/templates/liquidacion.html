<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <link rel="stylesheet" type="text/css" href="/css/style.css">
        <title>Liquidación</title>
    </head>

    <body class="container">
        <!-- NavBar postlogin -->
        <header class="container bg-warning" th:insert="~{../static/html/postloginheader.html}"></header>

        <main class="container d-flex justify-content-center">
            <div class="col-6">
                <form th:action="${titulo == 'Crear' ? '' : '/liquidacion/actualizar/' + liquidacionActualizar.getIdLiquidacion()}" method="post">
                    <h2 th:text="${titulo + ' Liquidación'}"></h2>
                    <div class="mb-3" th:if="${titulo == 'Editar'}">
                        <label for="inputIdLiq" class="form-label">ID</label>
                        <input type="text" class="form-control" id="inputIdLiq" name="idLiquidacion"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getIdLiquidacion()}" disabled>
                    </div>
                    <!-- Select Trabajador -->
                    <div class="mb-3">
                        <label for="selectTrabajador" class="form-label">Trabajador</label>
                        <select class="form-select" name="trabajador.idTrabajador" id="selectTrabajador">
                            <option value="0"
                                    th:if="${titulo == 'Crear'}"
                                    th:selected="${titulo == 'Crear'}">
                                Selecciona un Trabajador
                            </option>
                            <option th:each="trabajador : ${trabajadores}"
                                    th:value="${trabajador.getIdTrabajador()}"
                                    th:text="${'ID:'+ trabajador.getIdTrabajador() + ' Nombre: ' + trabajador.getNombre()}"
                                    th:selected="${titulo == 'Editar' and trabajador.getIdTrabajador() == liquidacionActualizar.getTrabajador().getIdTrabajador()}">
                            </option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="inputSueldoImponible" class="form-label">Sueldo Imponible</label>
                        <input type="number" class="form-control" id="inputSueldoImponible" name="sueldoImponible"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getSueldoImponible()}">
                    </div>
                    <!-- Select Inst Salud -->
                    <div class="mb-3">
                        <label for="selectInstSalud" class="form-label">Institución de Salud</label>
                        <select class="form-select" name="institucionSalud.idSalud" id="selectInstSalud">
                            <option value="0"
                                    th:if="${titulo == 'Crear'}"
                                    th:selected="${titulo == 'Crear'}">
                                Selecciona una Institución de Salud
                            </option>
                            <option th:each="instSalud : ${institucionesSalud}"
                                    th:value="${instSalud.getIdSalud()}"
                                    th:text="${instSalud.getDescripcion()}"
                                    th:selected="${titulo == 'Editar' and instSalud.getIdSalud() == liquidacionActualizar.getInstitucionSalud().getIdSalud()}">
                            </option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="inputMontoSalud" class="form-label">Monto Salud</label>
                        <input type="text" class="form-control" id="inputMontoSalud" name="montoInstSalud"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getMontoInstSalud()}">
                    </div>
                    <!-- Select Instituciones Previsionales -->
                    <div class="mb-3">
                        <label for="SelectInstPrev" class="form-label">AFP</label>
                        <select class="form-select" name="institucionPrevision.idPrevision" id="SelectInstPrev">
                            <option value="0"
                                    th:if="${titulo == 'Crear'}"
                                    th:selected="${titulo == 'Crear'}">
                                Selecciona una Institución Previsional o AFP
                            </option>
                            <option th:each="instPrev : ${institucionesPrevisionales}"
                                    th:value="${instPrev.getIdPrevision()}"
                                    th:text="${instPrev.getDescripcion()}"
                                    th:selected="${titulo == 'Editar' and instPrev.getIdPrevision() == liquidacionActualizar.getInstitucionPrevision().getIdPrevision()}">
                            </option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label for="inputMontoPrev" class="form-label">Monto AFP</label>
                        <input type="number" class="form-control" id="inputMontoPrev" name="montoInstPrevisional"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getMontoInstPrevisional()}">
                    </div>
                    <div class="mb-3">
                        <label for="inputTotalDscto" class="form-label">Total Descuentos</label>
                        <input type="number" class="form-control" id="inputTotalDscto" name="totalDescuento"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getTotalDescuento()}">
                    </div>
                    <div class="mb-3">
                        <label for="inputTotalHaberes" class="form-label">Total Haberes</label>
                        <input type="number" class="form-control" id="inputTotalHaberes" name="totalHaberes"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getTotalHaberes()}">
                    </div>
                    <div class="mb-3">
                        <label for="inputAnticipo" class="form-label">Anticipo</label>
                        <input type="number" class="form-control" id="inputAnticipo" name="anticipo"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getAnticipo()}">
                    </div>
                    <div class="mb-3">
                        <label for="inputSueldoLiquido" class="form-label">Sueldo Líquido</label>
                        <input type="number" class="form-control" id="inputSueldoLiquido" name="sueldoLiquido"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getSueldoLiquido()}">
                    </div>
                    <div class="mb-3">
                        <label for="inputPeriodo" class="form-label">Periodo</label>
                        <input type="date" class="form-control" id="inputPeriodo" name="periodo"
                               th:attr="value=${titulo == 'Crear'} ? null : ${liquidacionActualizar.getPeriodo()}">
                    </div>
                    <div class="container d-flex justify-content-center">
                        <button class="btn btn-outline-success col-6 mb-5"
                                type="submit" th:text="${titulo == 'Crear'} ? 'Crear Liquidación' : 'Guardar Cambios'"></button>
                    </div>
                </form>
            </div>
        </main>

        <footer class="container bg-warning" th:insert="~{../static/html/footer.html}"></footer>

        <!-- Script Bootstrap -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    </body>
</html>